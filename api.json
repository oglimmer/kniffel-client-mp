{"openapi":"3.0.1","info":{"title":"Kniffel Game API","description":"Kniffel as a service - KaaS","license":{"name":"Apache 2.0","url":"https://www.apache.org/licenses/LICENSE-2.0"},"version":"v0.0.1"},"externalDocs":{"description":"Kniffel Regeln","url":"https://www.schmidtspiele.de/files/Produkte/4/49030%20-%20Kniffel/49203_49030_Kniffel_DE.pdf"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"paths":{"/api/v1/game/{gameId}/roll":{"post":{"tags":["game-controller"],"summary":"Re-roll the dice. Can only be called in gameState = ROLL","operationId":"roll","parameters":[{"name":"gameId","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DiceRollRequest"}}},"required":true},"responses":{"200":{"description":"Dice rolled","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GameResponse"}}}}}}},"/api/v1/game/{gameId}/book":{"post":{"tags":["game-controller"],"summary":"Book the current dice roll under a specific category. Can only be called in gameState = BOOK","operationId":"book","parameters":[{"name":"gameId","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookRollRequest"}}},"required":true},"responses":{"200":{"description":"Dice roll booked to category","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GameResponse"}}}}}}},"/api/v1/game/":{"post":{"tags":["game-controller"],"summary":"Create a new game with a specific number of players","description":"The number of players must be at least 2. All player names must be different.","operationId":"createGame","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateGameRequest"}}},"required":true},"responses":{"201":{"description":"Created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GameResponse"}}}}}}},"/api/v1/game/{gameId}":{"get":{"tags":["game-controller"],"summary":"Provides all information for a game. Can be called at any point in time.","operationId":"getGameInfo","parameters":[{"name":"gameId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Game found and data returned","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GameResponse"}}}}}}}},"components":{"schemas":{"GameResponse":{"required":["availableBookingTypes","currentPlayerName","diceRolls","gameId","playerData","rollRound","state","usedBookingTypes"],"type":"object","properties":{"gameId":{"type":"string","description":"Secret game id","example":"1234567890"},"playerData":{"type":"array","items":{"$ref":"#/components/schemas/PlayerData"}},"currentPlayerName":{"type":"string","description":"player name whose turn it is","example":"john doe"},"state":{"type":"string","description":"current state of the turn. can either be ROLL or BOOK","example":"BOOK","enum":["ROLL","BOOK"]},"usedBookingTypes":{"type":"array","description":"all booking types already used by the current player","example":["ONES","TWOS"],"items":{"type":"string","description":"all booking types already used by the current player","example":"[\"ONES\",\"TWOS\"]","enum":["ONES","TWOS","THREES","FOURS","FIVES","SIXES","THREE_OF_A_KIND","FOUR_OF_A_KIND","FULL_HOUSE","SMALL_STRAIGHT","LARGE_STRAIGHT","CHANCE","KNIFFEL"]},"enum":["ONES","TWOS","THREES","FOURS","FIVES","SIXES","THREE_OF_A_KIND","FOUR_OF_A_KIND","FULL_HOUSE","SMALL_STRAIGHT","LARGE_STRAIGHT","CHANCE","KNIFFEL"]},"availableBookingTypes":{"type":"array","description":"all booking types not used yet by the current player","example":["ONES","TWOS"],"items":{"type":"string","description":"all booking types not used yet by the current player","example":"[\"ONES\",\"TWOS\"]","enum":["ONES","TWOS","THREES","FOURS","FIVES","SIXES","THREE_OF_A_KIND","FOUR_OF_A_KIND","FULL_HOUSE","SMALL_STRAIGHT","LARGE_STRAIGHT","CHANCE","KNIFFEL"]},"enum":["ONES","TWOS","THREES","FOURS","FIVES","SIXES","THREE_OF_A_KIND","FOUR_OF_A_KIND","FULL_HOUSE","SMALL_STRAIGHT","LARGE_STRAIGHT","CHANCE","KNIFFEL"]},"diceRolls":{"type":"array","description":"dice values rolled by the current player. Always 5 elements. Values as 6 sided dice, thus from 1 to 6","example":[1,2,2,3,6],"items":{"type":"integer","description":"dice values rolled by the current player. Always 5 elements. Values as 6 sided dice, thus from 1 to 6","format":"int32"}},"rollRound":{"type":"integer","description":"Indicated the round during the ROLL state. Can be 1 or 2 as after the 2nd round, the game moved automatically into state BOOK.","format":"int32","example":1,"enum":[1,2]}},"description":"Game data model. Used for communication between client and server and returned by all endpoints"},"PlayerData":{"required":["name","score"],"type":"object","properties":{"name":{"type":"string","description":"Player name. Given at game creation","example":"john doe"},"score":{"type":"integer","description":"Current total score of the player","format":"int32","example":30}},"description":"Player to score model"},"DiceRollRequest":{"type":"object","properties":{"diceToKeep":{"type":"array","description":"Dice to keep. Must be a subset of the current roll.","example":[1,2,3,4,5],"items":{"type":"integer","description":"Dice to keep. Must be a subset of the current roll.","format":"int32"}}},"description":"Re-roll dice request"},"BookRollRequest":{"type":"object","properties":{"bookingType":{"type":"string","description":"Booking type to book the current roll for. Must be one of the available booking types.","example":"ONES","enum":["ONES","TWOS","THREES","FOURS","FIVES","SIXES","THREE_OF_A_KIND","FOUR_OF_A_KIND","FULL_HOUSE","SMALL_STRAIGHT","LARGE_STRAIGHT","CHANCE","KNIFFEL"]}},"description":"Book rolls into category request"},"CreateGameRequest":{"type":"object","properties":{"playerNames":{"type":"array","description":"Defines the participating players. Each player name must be different and at least 2 players have to be provided","example":["john doe","jane doe"],"items":{"type":"string","description":"Defines the participating players. Each player name must be different and at least 2 players have to be provided","example":"[\"john doe\",\"jane doe\"]"}}},"description":"Game creation request"}}}}